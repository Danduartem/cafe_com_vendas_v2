<section
  id="thankyou"
  aria-label="{{ currentSection.copy.accessibility.ariaLabel }}"
  class="relative isolate w-full min-h-[90vh] bg-gradient-to-b from-neutral-50 via-white to-neutral-50/30 py-20 sm:py-24 lg:py-28"
  data-analytics-section="thankyou"
  data-reveal
>
  <div class="container mx-auto px-4 sm:px-6 lg:px-8 max-w-6xl">
    <!-- Header -->
    <div class="text-center mb-16" data-reveal>
      <!-- Success Badge -->
      <div class="inline-flex items-center gap-3 px-6 py-3.5 rounded-2xl bg-gradient-to-r from-burgundy-50 to-burgundy-100/80 text-burgundy-700 shadow-md backdrop-blur-sm border border-burgundy-200/40 mb-8">
        <!-- check icon with subtle animation -->
        <div class="flex-shrink-0 w-6 h-6 rounded-full bg-burgundy-600 flex items-center justify-center">
          <svg class="w-4 h-4 text-white" fill="none" stroke="currentColor" stroke-width="3" viewBox="0 0 24 24" aria-hidden="true">
            <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
          </svg>
        </div>
        <span class="font-century text-base font-bold tracking-wide">{{ currentSection.copy.badge.text }}</span>
      </div>

      <!-- Main Headline with Enhanced Typography -->
      <h1 class="font-lora font-bold text-[clamp(2.5rem,8vw,4rem)] leading-[1.05] text-navy-900 tracking-tight mb-6">
        {{ currentSection.copy.header.title | safe }}
      </h1>

      <!-- Enhanced Subtitle -->
      <div class="max-w-[65ch] mx-auto">
        <p class="font-century text-[clamp(1.1rem,3.2vw,1.3rem)] text-navy-600 leading-relaxed">
          {{ currentSection.copy.header.subtitle | safe }}
        </p>
      </div>
    </div>

    <!-- Milestone Progress -->
    <div class="mx-auto max-w-3xl mb-14" data-reveal>
      <div class="text-center mb-8">
        <h2 class="font-century text-sm font-medium text-navy-500 uppercase tracking-wider mb-2">{{ currentSection.copy.progress.label }}</h2>
      </div>
      
      <!-- Milestone Steps -->
      <div class="relative">
        <!-- Progress Line -->
        <div class="absolute top-8 left-0 right-0 h-1 bg-gradient-to-r from-neutral-200 to-neutral-300 rounded-full"></div>
        <div class="absolute top-8 left-0 w-1/2 h-1 bg-gradient-to-r from-burgundy-500 to-burgundy-600 rounded-full transition-all duration-1000 ease-out"></div>
        
        <!-- Steps Grid -->
        <div class="grid grid-cols-1 sm:grid-cols-3 gap-6 sm:gap-4">
          {% for milestone in currentSection.copy.progress.milestones %}
          <div class="flex flex-col items-center text-center">
            <!-- Step Icon -->
            <div class="relative z-10 flex items-center justify-center w-16 h-16 rounded-full mb-3 transition-all duration-300
              {% if milestone.status == 'completed' %}bg-gradient-to-br from-burgundy-500 to-burgundy-700 shadow-lg
              {% elif milestone.status == 'current' %}bg-gradient-to-br from-gold-400 to-gold-600 shadow-lg ring-4 ring-gold-100
              {% else %}bg-white border-2 border-neutral-300{% endif %}">
              
              {% if milestone.icon == 'check' %}
                <svg class="w-6 h-6 {% if milestone.status == 'completed' %}text-white{% else %}text-neutral-400{% endif %}" fill="none" stroke="currentColor" stroke-width="2.5" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M5 13l4 4L19 7" />
                </svg>
              {% elif milestone.icon == 'user' %}
                <svg class="w-6 h-6 {% if milestone.status == 'current' %}text-white{% else %}text-neutral-400{% endif %}" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M16 7a4 4 0 11-8 0 4 4 0 018 0zM12 14a7 7 0 00-7 7h14a7 7 0 00-7-7z" />
                </svg>
              {% elif milestone.icon == 'star' %}
                <svg class="w-6 h-6 text-neutral-400" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                  <path stroke-linecap="round" stroke-linejoin="round" d="M11.049 2.927c.3-.921 1.603-.921 1.902 0l1.519 4.674a1 1 0 00.95.69h4.915c.969 0 1.371 1.24.588 1.81l-3.976 2.888a1 1 0 00-.363 1.118l1.518 4.674c.3.922-.755 1.688-1.538 1.118l-3.976-2.888a1 1 0 00-1.176 0l-3.976 2.888c-.783.57-1.838-.197-1.538-1.118l1.518-4.674a1 1 0 00-.363-1.118l-3.976-2.888c-.784-.57-.38-1.81.588-1.81h4.914a1 1 0 00.951-.69l1.519-4.674z" />
                </svg>
              {% endif %}
              
              <!-- Time Badge for Current Step -->
              {% if milestone.status == 'current' and milestone.time %}
              <div class="absolute -top-2 -right-2 px-2 py-1 bg-navy-700 text-white text-xs font-bold rounded-full shadow-md">
                {{ milestone.time }}
              </div>
              {% endif %}
            </div>
            
            <!-- Step Info -->
            <div>
              <p class="font-century text-sm font-bold mb-1 
                {% if milestone.status == 'completed' %}text-burgundy-700
                {% elif milestone.status == 'current' %}text-gold-700
                {% else %}text-neutral-500{% endif %}">
                {{ milestone.title }}
              </p>
              <span class="inline-block w-2 h-2 rounded-full 
                {% if milestone.status == 'completed' %}bg-burgundy-500
                {% elif milestone.status == 'current' %}bg-gold-500 animate-pulse
                {% else %}bg-neutral-300{% endif %}">
              </span>
            </div>
          </div>
          {% endfor %}
        </div>
      </div>
      
      <!-- Progress Message -->
      <p class="mt-8 text-center font-lora italic text-[clamp(1rem,2.8vw,1.1rem)] text-burgundy-600">
        {{ currentSection.copy.progress.message }}
      </p>
    </div>

    <!-- Primary Card -->
    <div class="grid grid-cols-1 lg:grid-cols-12 gap-8 lg:gap-14 items-start">
      <!-- Left: CTA + Steps -->
      <div class="lg:col-span-7" data-reveal>
        <div class="group relative rounded-3xl bg-white shadow-[0_8px_30px_rgb(0,0,0,0.08)] hover:shadow-[0_16px_40px_rgb(0,0,0,0.12)] p-6 sm:p-10 lg:p-12 border border-neutral-200/40 backdrop-blur-sm transition-all duration-300">
          <div class="flex items-start gap-4 mb-6">
            <div class="flex-shrink-0 w-10 h-10 rounded-full bg-gradient-to-br from-burgundy-500 to-burgundy-600 flex items-center justify-center text-white font-bold shadow-md">
              1
            </div>
            <div>
              <h2 class="font-lora text-[clamp(1.4rem,3.5vw,1.9rem)] text-navy-900 leading-[1.15] font-bold">
                {{ currentSection.copy.mainAction.title }}
              </h2>
              <p class="mt-2 font-century text-base text-navy-600 leading-relaxed">
                {{ currentSection.copy.mainAction.description }}
              </p>
            </div>
          </div>

          <a
            href="{{ currentSection.copy.mainAction.button.url }}"
            class="relative z-10 group/btn inline-flex items-center justify-center px-10 py-5 min-h-[64px] rounded-2xl text-white font-bold bg-gradient-to-r from-burgundy-600 via-burgundy-700 to-navy-800 hover:from-burgundy-700 hover:via-burgundy-800 hover:to-navy-900 transform hover:scale-[1.03] transition-all duration-300 shadow-[0_8px_24px_rgb(129,23,31,0.3)] hover:shadow-[0_12px_32px_rgb(129,23,31,0.4)] hover:shadow-burgundy-700/30 before:absolute before:inset-0 before:rounded-2xl before:bg-gradient-to-r before:from-white/10 before:to-transparent before:opacity-0 hover:before:opacity-100 before:transition-opacity before:duration-300"
            data-analytics-click="{{ currentSection.copy.mainAction.button.analytics }}"
          >
            <span class="mr-2">{{ currentSection.copy.mainAction.button.text }}</span>
            <svg class="w-5 h-5" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" d="M13 7l5 5m0 0l-5 5m5-5H6" />
            </svg>
          </a>

          <div class="mt-12 space-y-6">
            {% for step in currentSection.copy.steps %}
            <div class="relative step-card flex items-start gap-5 p-6 rounded-2xl bg-gradient-to-br from-neutral-50/50 to-white hover:from-neutral-50 hover:to-neutral-25 border border-neutral-200/30 hover:border-neutral-300/50 transition-all duration-300 hover:shadow-md">
              <div class="flex-shrink-0 w-8 h-8 rounded-full bg-gradient-to-br from-{{ step.color }}-100 to-{{ step.color }}-200 flex items-center justify-center text-{{ step.color }}-700 font-bold text-sm">
                {{ step.number }}
              </div>
              <div class="flex-1">
                <h3 class="font-lora text-navy-800 text-[1.15rem] leading-[1.25] font-semibold mb-1">{{ step.title }}</h3>
                <p class="font-century text-navy-600 leading-relaxed{% if step.calendarDropdown %} mb-3{% endif %}">
                  {{ step.description | safe }}
                </p>
                {% if step.calendarDropdown %}
                <!-- Calendar Dropdown -->
                <div class="relative inline-block" data-calendar-dropdown>
                  <button
                    type="button"
                    class="{{ step.calendarDropdown.buttonClasses }}"
                    data-analytics-click="{{ step.calendarDropdown.analytics }}"
                    data-dropdown-button
                    aria-expanded="false"
                    aria-haspopup="true"
                  >
                    <span>{{ step.calendarDropdown.buttonText }}</span>
                    <svg class="w-4 h-4 transition-transform duration-200" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24" data-dropdown-icon>
                      <path stroke-linecap="round" stroke-linejoin="round" d="M19 9l-7 7-7-7" />
                    </svg>
                  </button>
                  
                  <!-- Dropdown Menu -->
                  <div
                    class="absolute top-full left-0 mt-2 w-80 bg-white border border-neutral-200 rounded-xl shadow-lg opacity-0 invisible transform scale-95 transition-all duration-200 z-50"
                    data-dropdown-menu
                    role="menu"
                    aria-orientation="vertical"
                  >
                    <div class="p-3">
                      <div class="text-xs font-medium text-navy-500 uppercase tracking-wider mb-2 px-1">Escolha o seu calend√°rio</div>
                      
                      {% for option in step.calendarDropdown.options %}
                      <button
                        type="button"
                        class="w-full flex items-center gap-3 px-3 py-3 text-left rounded-lg hover:bg-navy-50 transition-colors duration-150 group"
                        data-calendar-option="{{ option.id }}"
                        data-analytics-click="calendar_{{ option.id }}"
                        role="menuitem"
                      >
                        <span class="text-lg flex-shrink-0">{{ option.icon }}</span>
                        <div class="flex-1 min-w-0">
                          <div class="flex items-center gap-2">
                            <span class="font-medium text-navy-700 text-sm">{{ option.text }}</span>
                            {% if option.recommended %}
                            <span class="inline-flex items-center px-2 py-0.5 rounded-full text-xs font-medium bg-gold-100 text-gold-700">
                              Recomendado
                            </span>
                            {% endif %}
                          </div>
                          <p class="text-xs text-navy-500 mt-0.5 group-hover:text-navy-600">{{ option.description }}</p>
                        </div>
                        <svg class="w-4 h-4 text-navy-400 opacity-0 group-hover:opacity-100 transition-opacity duration-150" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                          <path stroke-linecap="round" stroke-linejoin="round" d="M10 6H6a2 2 0 00-2 2v10a2 2 0 002 2h10a2 2 0 002-2v-4M14 4h6m0 0v6m0-6L10 14" />
                        </svg>
                      </button>
                      {% endfor %}
                    </div>
                  </div>
                </div>
                {% endif %}
              </div>
            </div>
            {% endfor %}
          </div>
        </div>
      </div>

      <!-- Right: Event Summary -->
      <aside class="lg:col-span-5" data-reveal>
        <div class="sticky top-8 rounded-3xl bg-gradient-to-br from-burgundy-50/80 via-white to-burgundy-50/40 p-10 border border-burgundy-200/40 shadow-[0_8px_30px_rgb(129,23,31,0.08)] backdrop-blur-sm hover:shadow-[0_12px_35px_rgb(129,23,31,0.12)] transition-all duration-300">
          <div class="flex items-center gap-3 mb-6">
            <div class="w-12 h-12 rounded-2xl bg-gradient-to-br from-burgundy-500 to-burgundy-700 flex items-center justify-center shadow-md">
              <svg class="w-6 h-6 text-white" fill="none" stroke="currentColor" stroke-width="2" viewBox="0 0 24 24">
                <path stroke-linecap="round" stroke-linejoin="round" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
              </svg>
            </div>
            <div>
              <h3 class="font-lora text-[clamp(1.2rem,3vw,1.5rem)] text-navy-900 leading-[1.15] font-bold">
                {{ currentSection.copy.eventSummary.title }}
              </h3>
              <p class="font-century text-sm text-burgundy-600 font-semibold">
                {{ currentSection.copy.eventSummary.subtitle }}
              </p>
            </div>
          </div>

          <div class="space-y-5">
            {% for feature in currentSection.copy.eventSummary.features %}
            <div class="flex items-start gap-4 p-4 rounded-2xl bg-white/80 backdrop-blur-sm border border-white/50 shadow-sm hover:shadow-md transition-all duration-200">
              <svg class="w-5 h-5 text-burgundy-600 mt-0.5 flex-shrink-0" fill="currentColor" viewBox="0 0 20 20">
                <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm3.707-9.293a1 1 0 00-1.414-1.414L9 10.586 7.707 9.293a1 1 0 00-1.414 1.414l2 2a1 1 0 001.414 0l4-4z" clip-rule="evenodd" />
              </svg>
              <div>
                <p class="font-century text-navy-700 leading-relaxed">
                  {{ feature | safe }}
                </p>
              </div>
            </div>
            {% endfor %}
          </div>

          <div class="mt-8 p-6 rounded-2xl bg-gradient-to-br from-burgundy-50 via-burgundy-25 to-navy-50/30 border-2 border-burgundy-200/60 shadow-md relative overflow-hidden before:absolute before:inset-0 before:bg-gradient-to-r before:from-burgundy-500/5 before:to-navy-500/5 before:rounded-2xl">
            <p class="font-century text-sm text-navy-700 leading-relaxed">
              {{ currentSection.copy.eventSummary.important | safe }}
            </p>
          </div>
        </div>
      </aside>
    </div>
  </div>

</section>